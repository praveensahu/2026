<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Architect Level CSRF & CORS - 30 Questions and Answers</title>
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 40px;
        line-height: 1.6;
        background-color: #f4f6f9;
    }
    h1 {
        text-align: center;
        color: #1f4e79;
    }
    h2 {
        background-color: #1f4e79;
        color: white;
        padding: 8px;
        border-radius: 5px;
    }
    .qa {
        background: white;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 6px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .question {
        font-weight: bold;
        color: #333;
    }
    .answer {
        margin-top: 8px;
        color: #444;
    }
</style>
</head>
<body>

<h1>Architect Level CSRF & CORS - 30 Questions and Answers</h1>

<h2>CSRF (Cross-Site Request Forgery)</h2>

<div class="qa">
<p class="question">1. What is CSRF?</p>
<p class="answer">CSRF is an attack where a malicious site tricks a userâ€™s browser into making unintended authenticated requests to a trusted application.</p>
</div>

<div class="qa">
<p class="question">2. Why does CSRF occur?</p>
<p class="answer">Because browsers automatically attach credentials like cookies or session tokens to requests sent to the original domain.</p>
</div>

<div class="qa">
<p class="question">3. Which HTTP methods are vulnerable?</p>
<p class="answer">Primarily POST, PUT, PATCH, DELETE. Even GET can be dangerous if it modifies state.</p>
</div>

<div class="qa">
<p class="question">4. How does CSRF differ from XSS?</p>
<p class="answer">CSRF exploits authenticated sessions. XSS injects malicious scripts into trusted websites.</p>
</div>

<div class="qa">
<p class="question">5. What is a CSRF token?</p>
<p class="answer">A unique, unpredictable token generated by the server and validated on every state-changing request.</p>
</div>

<div class="qa">
<p class="question">6. What is SameSite cookie attribute?</p>
<p class="answer">It restricts browsers from sending cookies with cross-site requests. Values: Strict, Lax, None.</p>
</div>

<div class="qa">
<p class="question">7. How does SameSite=Lax behave?</p>
<p class="answer">Allows cookies for top-level navigation but blocks them in embedded requests like iframes or AJAX.</p>
</div>

<div class="qa">
<p class="question">8. What is Double Submit Cookie pattern?</p>
<p class="answer">The client sends CSRF token in both cookie and request header; server validates both match.</p>
</div>

<div class="qa">
<p class="question">9. Why is JWT less vulnerable to CSRF?</p>
<p class="answer">Because JWT stored in localStorage is not automatically sent by browsers.</p>
</div>

<div class="qa">
<p class="question">10. How does CSRF protection work in Spring Security?</p>
<p class="answer">Spring automatically generates and validates CSRF tokens for state-changing requests.</p>
</div>

<div class="qa">
<p class="question">11. Can CSRF affect REST APIs?</p>
<p class="answer">Yes, if APIs rely on cookie-based authentication.</p>
</div>

<div class="qa">
<p class="question">12. What headers help mitigate CSRF?</p>
<p class="answer">Origin and Referer headers can be validated server-side.</p>
</div>

<div class="qa">
<p class="question">13. Why is GET not recommended for state changes?</p>
<p class="answer">Because GET can be triggered easily via image tags or links.</p>
</div>

<div class="qa">
<p class="question">14. What architectural layer should handle CSRF?</p>
<p class="answer">At the API Gateway or Application Security filter layer.</p>
</div>

<div class="qa">
<p class="question">15. How to protect microservices from CSRF?</p>
<p class="answer">Use token-based auth (JWT/OAuth2) and avoid cookie-based authentication.</p>
</div>

<h2>CORS (Cross-Origin Resource Sharing)</h2>

<div class="qa">
<p class="question">16. What is CORS?</p>
<p class="answer">CORS is a browser security mechanism that controls cross-origin HTTP requests.</p>
</div>

<div class="qa">
<p class="question">17. What is an origin?</p>
<p class="answer">Combination of protocol, domain, and port.</p>
</div>

<div class="qa">
<p class="question">18. What is a preflight request?</p>
<p class="answer">An OPTIONS request sent by browser to check server permissions before actual request.</p>
</div>

<div class="qa">
<p class="question">19. When does preflight happen?</p>
<p class="answer">When using custom headers, non-simple methods (PUT, DELETE), or non-simple content types.</p>
</div>

<div class="qa">
<p class="question">20. What is Access-Control-Allow-Origin?</p>
<p class="answer">Response header specifying allowed origins.</p>
</div>

<div class="qa">
<p class="question">21. Why is '*' risky?</p>
<p class="answer">It allows all domains, which may expose sensitive APIs.</p>
</div>

<div class="qa">
<p class="question">22. What is Access-Control-Allow-Credentials?</p>
<p class="answer">Allows cookies or credentials in cross-origin requests.</p>
</div>

<div class="qa">
<p class="question">23. Can '*' be used with credentials?</p>
<p class="answer">No. Specific origin must be defined.</p>
</div>

<div class="qa">
<p class="question">24. What is Access-Control-Max-Age?</p>
<p class="answer">Defines how long browser caches preflight response.</p>
</div>

<div class="qa">
<p class="question">25. How is CORS configured in API Gateway?</p>
<p class="answer">By defining allowed origins, methods, headers at gateway level.</p>
</div>

<div class="qa">
<p class="question">26. Is CORS a server-side security feature?</p>
<p class="answer">No. It is enforced by browsers.</p>
</div>

<div class="qa">
<p class="question">27. Can CORS stop Postman attacks?</p>
<p class="answer">No. CORS only restricts browser-based requests.</p>
</div>

<div class="qa">
<p class="question">28. Difference between CSRF and CORS?</p>
<p class="answer">CSRF is an attack. CORS is a browser security policy.</p>
</div>

<div class="qa">
<p class="question">29. Best practice for production CORS config?</p>
<p class="answer">Whitelist specific domains, limit methods, disable credentials unless required.</p>
</div>

<div class="qa">
<p class="question">30. How to explain CSRF + CORS in interview?</p>
<p class="answer">CSRF protects against unwanted authenticated requests. CORS controls cross-origin access. They solve different problems and both must be configured properly.</p>
</div>

</body>
</html>
